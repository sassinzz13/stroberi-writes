{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/AddPost/AddPost.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"activeBtn\": \"AddPost-module__OQxqdq__activeBtn\",\n  \"addPostContainer\": \"AddPost-module__OQxqdq__addPostContainer\",\n  \"editor\": \"AddPost-module__OQxqdq__editor\",\n  \"editorContainer\": \"AddPost-module__OQxqdq__editorContainer\",\n  \"form\": \"AddPost-module__OQxqdq__form\",\n  \"input\": \"AddPost-module__OQxqdq__input\",\n  \"is-editor-empty\": \"AddPost-module__OQxqdq__is-editor-empty\",\n  \"submitBtn\": \"AddPost-module__OQxqdq__submitBtn\",\n  \"textarea\": \"AddPost-module__OQxqdq__textarea\",\n  \"toolbar\": \"AddPost-module__OQxqdq__toolbar\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///home/sassinzz13/programming-portfolio/stroberi-writes/client/src/components/EditPost/EditPost.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport styles from \"../AddPost/AddPost.module.css\";\nimport \"quill/dist/quill.snow.css\";\n\nconst EditPost = () => {\n  const { year, month, day, slug } = useParams();\n  const router = useRouter();\n\n  const [postId, setPostId] = useState(null); // store post ID\n  const [title, setTitle] = useState(\"\");\n  const [slugValue, setSlugValue] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [tags, setTags] = useState([]);\n  const [status, setStatus] = useState(\"DF\");\n  const [publish, setPublish] = useState(\"\"); // store post's publish date\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const quillRef = useRef(null);\n  const editorRef = useRef(null);\n\n  const token =\n    typeof window !== \"undefined\" ? localStorage.getItem(\"accessToken\") : null;\n\n  // Auto-generate slug when title changes\n  useEffect(() => {\n    const generateSlug = (text) => {\n      return text\n        .toLowerCase()\n        .trim()\n        .replace(/[^\\w\\s-]/g, \"\")\n        .replace(/\\s+/g, \"-\");\n    };\n    setSlugValue(generateSlug(title));\n  }, [title]);\n\n  // Fetch post data\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const res = await fetch(\n          `http://127.0.0.1:8000/api/blog/posts/${year}/${month}/${day}/${slug}/`\n        );\n        if (!res.ok) throw new Error(`Failed to fetch post: ${res.status}`);\n        const data = await res.json();\n        const post = data.post;\n        setPostId(post.id);\n        setTitle(post.title);\n        setSlugValue(post.slug);\n        setDescription(post.body);\n        setTags(post.tags || []);\n        setStatus(post.status);\n        setPublish(post.publish); // store original publish date\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPost();\n  }, [year, month, day, slug]);\n\n  // Initialize Quill once after post is loaded\n  useEffect(() => {\n    if (!editorRef.current || loading || quillRef.current) return; // only init once\n\n    const container = document.createElement(\"div\");\n    container.style.minHeight = \"200px\";\n    container.style.background = \"white\";\n    container.style.marginBottom = \"1rem\";\n    editorRef.current.innerHTML = \"\";\n    editorRef.current.appendChild(container);\n\n    const initQuill = async () => {\n      const Quill = (await import(\"quill\")).default;\n      const quillInstance = new Quill(container, {\n        theme: \"snow\",\n        placeholder: \"Write your description here...\",\n        modules: {\n          toolbar: [\n            [{ header: [1, 2, 3, false] }],\n            [\"bold\", \"italic\", \"underline\", \"strike\"],\n            [{ list: \"ordered\" }, { list: \"bullet\" }],\n            [\"link\", \"image\"],\n            [\"clean\"],\n          ],\n        },\n      });\n\n      quillInstance.root.innerHTML = description; // set initial content\n\n      quillInstance.on(\"text-change\", () => {\n        setDescription(quillInstance.root.innerHTML);\n      });\n\n      quillRef.current = quillInstance;\n    };\n\n    initQuill();\n\n    return () => {\n      if (quillRef.current) {\n        quillRef.current.off(\"text-change\");\n        quillRef.current = null;\n      }\n      if (editorRef.current) editorRef.current.innerHTML = \"\";\n    };\n  }, [loading]); // remove `description` from deps\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    setError(\"\");\n    setSuccess(\"\");\n\n    if (!postId) {\n      setError(\"Post ID not found.\");\n      setSaving(false);\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"slug\", slugValue);\n    formData.append(\"body\", description);\n    formData.append(\"status\", status);\n    formData.append(\"publish\", publish || new Date().toISOString());\n    if (image) formData.append(\"image\", image);\n    if (tags.length > 0) tags.forEach((tag) => formData.append(\"tags\", tag));\n\n    try {\n      const res = await fetch(\n        `http://127.0.0.1:8000/api/blog/posts/${postId}/edit/`,\n        {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n          body: formData,\n        }\n      );\n\n      if (!res.ok) {\n        const data = await res.json();\n        throw new Error(JSON.stringify(data));\n      }\n\n      setSuccess(\"Post updated successfully!\");\n      router.push(`/viewcontent/${year}/${month}/${day}/${slugValue}`);\n    } catch (err) {\n      setError(\"Failed to update post: \" + err.message + \"Try logging in again\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) return <p>Loading post...</p>;\n\n  return (\n    <div className={styles.addPostContainer}>\n      <h1>Edit Post</h1>\n      <form className={styles.form} onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          placeholder=\"Title\"\n          className={styles.input}\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          required\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Slug (auto-generated)\"\n          className={styles.input}\n          value={slugValue}\n          readOnly\n        />\n        <input\n          type=\"file\"\n          accept=\"image/*\"\n          className={styles.input}\n          onChange={(e) => setImage(e.target.files[0])}\n        />\n        <label>Description</label>\n        <div\n          ref={editorRef}\n          style={{\n            minHeight: \"200px\",\n            background: \"white\",\n            marginBottom: \"1rem\",\n          }}\n        />\n        <select\n          className={styles.input}\n          value={tags[0] || \"\"}\n          onChange={(e) => setTags([e.target.value])}\n        >\n          <option value=\"\" disabled>\n            Select a tag\n          </option>\n          <option value=\"Creative Writing\">Creative Writing</option>\n          <option value=\"Poems\">Poems</option>\n          <option value=\"Short Stories\">Short Stories</option>\n          <option value=\"Literary Analysis\">Literary Analysis</option>\n          <option value=\"Entertainment\">Entertainment</option>\n        </select>\n        <select\n          className={styles.input}\n          value={status}\n          onChange={(e) => setStatus(e.target.value)}\n        >\n          <option value=\"DF\">Draft</option>\n          <option value=\"PB\">Published</option>\n        </select>\n        <button type=\"submit\" className={styles.submitBtn} disabled={saving}>\n          {saving ? \"Saving...\" : \"Update Post\"}\n        </button>\n        {error && <p style={{ color: \"red\" }}>{error}</p>}\n        {success && <p style={{ color: \"green\" }}>{success}</p>}\n      </form>\n    </div>\n  );\n};\n\nexport default EditPost;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///home/sassinzz13/programming-portfolio/stroberi-writes/client/src/components/ProtectedRoute/ProtectedRoute.jsx"],"sourcesContent":["'use client';\nimport { useContext, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { AuthContext } from \"@/context/AuthContext\";\n\nconst ProtectedRoute = ({ children }) => {\n  const { isLoggedIn, isSuperuser, loadingUser } = useContext(AuthContext);\n  const router = useRouter();\n\n  useEffect(() => {\n    if (!loadingUser) {\n      if (!isLoggedIn || !isSuperuser) {\n        // redirect non-admins to home or login\n        router.push(\"/\");\n      }\n    }\n  }, [loadingUser, isLoggedIn, isSuperuser, router]);\n\n  if (loadingUser) return <p>Loading...</p>; // optional placeholder while checking\n\n  // Only superusers get to see children\n  return isLoggedIn && isSuperuser ? children : null;\n};\n\nexport default ProtectedRoute;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE;IAClC,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,8HAAA,CAAA,cAAW;IACvE,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,aAAa;YAChB,IAAI,CAAC,cAAc,CAAC,aAAa;gBAC/B,uCAAuC;gBACvC,OAAO,IAAI,CAAC;YACd;QACF;IACF,GAAG;QAAC;QAAa;QAAY;QAAa;KAAO;IAEjD,IAAI,aAAa,qBAAO,8OAAC;kBAAE;;;;;kDAAgB,sCAAsC;IAEjF,sCAAsC;IACtC,OAAO,cAAc,cAAc,WAAW;AAChD;uCAEe","debugId":null}}]
}